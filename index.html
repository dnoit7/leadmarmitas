<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerador de Times</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    body { background: #f3f3f3; padding: 15px; }
    .card { border-radius: 16px; }

    .player-item { display: flex; gap: 10px; }
    .player-item input { font-size: 16px; }

    /* Ajuste fino mobile */
    @media (max-width: 600px) {
        .player-item {
            flex-direction: column;
        }
        .player-item .input-group {
            flex-direction: column;
        }
        .player-item select {
            width: 100%;
        }
    }
</style>
</head>
<body>

<div class="container">
    <h2 class="text-center mb-4 fw-bold">Gerador de Times ‚öΩ</h2>

    <!-- IMPORTA√á√ÉO -->
    <div class="card p-3 mb-3">
        <h5>Importar lista de jogadores</h5>
        <textarea id="rawList" class="form-control" rows="6" placeholder="Cole a lista aqui..."></textarea>

        <button class="btn btn-primary w-100 mt-2" onclick="importList()">Importar lista</button>
        <button class="btn btn-warning w-100 mt-2" onclick="clearList()">Limpar lista</button>
    </div>

    <!-- JOGADORES -->
    <div class="card p-3 mb-3">
        <h5>Jogadores</h5>
        <div id="playersContainer"></div>
    </div>

    <!-- TIMES -->
    <div class="card p-3 mb-3">
        <h5>Times</h5>

        <button class="btn btn-success w-100 mb-2" onclick="generateTeams()">Gerar Times</button>
        <button class="btn btn-info w-100" onclick="copyTeamsWhatsApp()">Copiar para WhatsApp</button>

        <div id="teamsResult" class="mt-3"></div>
    </div>
</div>

<script>
function importList() {
    let rawText = document.getElementById("rawList").value;

    let lines = rawText.split("\n");

    // üî• Regex corrigido para iPhone (remove apenas n√∫meros e emojis)
    let cleanedNames = lines.map(line => line
        .replace(/^\s*\d+[\)\.\-]*\s*/g, "") // remove "1 -", "2)", "3."
        .replace(/[\p{Emoji_Presentation}\p{Extended_Pictographic}]/gu, "") // remove emojis
        .trim()
    ).filter(name => name.length > 0);

    const container = document.getElementById("playersContainer");
    container.innerHTML = "";

    cleanedNames.forEach(name => {
        const div = document.createElement("div");
        div.className = "player-item mb-2";

        div.innerHTML = `
            <div class="input-group">
                <input type="text" class="form-control player-name" value="${name}">
                <select class="form-select player-level">
                    <option value="1">‚≠ê</option>
                    <option value="2">‚≠ê‚≠ê</option>
                    <option value="3">‚≠ê‚≠ê‚≠ê</option>
                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option>
                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
                </select>
            </div>
        `;

        container.appendChild(div);
    });
}

function clearList() {
    document.getElementById("rawList").value = "";
    document.getElementById("playersContainer").innerHTML = "";
    document.getElementById("teamsResult").innerHTML = "";
}

function generateTeams() {
    const names = [...document.querySelectorAll('.player-name')]
        .map(i => i.value.trim())
        .filter(i => i.length > 0);

    let shuffled = names.sort(() => Math.random() - 0.5);

    const half = Math.ceil(shuffled.length / 2);
    const teamA = shuffled.slice(0, half);
    const teamB = shuffled.slice(half);

    document.getElementById("teamsResult").innerHTML = `
        <div class='p-2 bg-light rounded'><h5>Time A</h5>${teamA.join("<br>")}</div>
        <hr>
        <div class='p-2 bg-light rounded'><h5>Time B</h5>${teamB.join("<br>")}</div>
    `;
}

function copyTeamsWhatsApp() {
    const text = document.getElementById("teamsResult").innerText;
    navigator.clipboard.writeText(text).then(() => {
        alert("Times copiados! Agora √© s√≥ colar no WhatsApp.");
    });
}
</script>

</body>
</html>
