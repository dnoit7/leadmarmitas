<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sorteio de Times - Pelada</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        padding: 20px;
    }

    h2 {
        margin-top: 30px;
    }

    .container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        max-width: 700px;
        margin: auto;
    }

    textarea {
        width: 100%;
        height: 120px;
        padding: 10px;
        margin-bottom: 10px;
        resize: vertical;
    }

    .player {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
    }

    .player input {
        flex: 1;
        padding: 8px;
    }

    .player select {
        width: 90px;
        padding: 8px;
    }

    button {
        padding: 10px;
        background: #0084ff;
        border: none;
        color: white;
        cursor: pointer;
        border-radius: 5px;
        font-size: 15px;
        margin-right: 8px;
    }

    button:hover {
        background: #006cd4;
    }

    .teams {
        display: flex;
        margin-top: 20px;
        gap: 20px;
    }

    .team {
        flex: 1;
        background: #fff;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .team h3 {
        margin-top: 0;
    }
</style>
</head>
<body>

<div class="container">

    <h2>Lista dos Jogadores (cole aqui a lista do WhatsApp)</h2>
    <textarea id="rawList" placeholder="Cole aqui a lista completa..."></textarea>

    <button onclick="importList()">Importar Lista</button>
    <button onclick="clearList()" style="background:#ff4747;">Limpar Lista</button>

    <h2>Classifica√ß√£o dos Jogadores</h2>
    <div id="playersContainer"></div>

    <button onclick="sortTeams()">Gerar Times</button>
    <button onclick="copyToWhatsApp()" style="background:#25D366;">Copiar Times p/ WhatsApp</button>

    <div class="teams">
        <div class="team">
            <h3>Time A</h3>
            <ul id="teamA"></ul>
        </div>
        <div class="team">
            <h3>Time B</h3>
            <ul id="teamB"></ul>
        </div>
    </div>

</div>


<script>

// Remove emojis usando regex universal
function removeEmojis(text) {
    return text.replace(/[\p{Emoji}\p{Extended_Pictographic}]/gu, "");
}

// Importar lista digitada
function importList() {
    const rawText = document.getElementById("rawList").value;

    let lines = rawText.split("\n");

    let cleanedNames = lines
        .map(line =>
            removeEmojis(
                line
                    .replace(/^\s*\d+\s*[-.)]*\s*/i, "") // remove "1 -", "3)", "2."
                    .trim()
            )
        )
        .filter(name => name.length > 0);

    const container = document.getElementById("playersContainer");
    container.innerHTML = "";

    cleanedNames.forEach((name, index) => {
        const div = document.createElement("div");
        div.className = "player";

        div.innerHTML = `
            <input 
                type="text" 
                class="player-name" 
                placeholder="Jogador ${index + 1}"
                value="${name}"
            >
            <select class="player-level">
                <option value="">N√≠vel</option>
                <option value="1">‚≠ê</option>
                <option value="2">‚≠ê‚≠ê</option>
                <option value="3">‚≠ê‚≠ê‚≠ê</option>
            </select>
        `;
        container.appendChild(div);
    });
}

// Limpar lista e jogadores
function clearList() {
    document.getElementById("rawList").value = "";
    document.getElementById("playersContainer").innerHTML = "";
    document.getElementById("teamA").innerHTML = "";
    document.getElementById("teamB").innerHTML = "";
}

// Gerar times equilibrados
function sortTeams() {
    const names = [...document.querySelectorAll(".player-name")].map(i => i.value);
    const levels = [...document.querySelectorAll(".player-level")].map(s => parseInt(s.value || "1"));

    let players = names.map((name, i) => ({ name, level: levels[i] }));

    // Ordena por n√≠vel (maior para menor)
    players.sort((a,b) => b.level - a.level);

    let teamA = [];
    let teamB = [];
    let sumA = 0;
    let sumB = 0;

    players.forEach(p => {
        if (sumA <= sumB) {
            teamA.push(p);
            sumA += p.level;
        } else {
            teamB.push(p);
            sumB += p.level;
        }
    });

    document.getElementById("teamA").innerHTML = teamA.map(p => `<li>${p.name} (${p.level})</li>`).join("");
    document.getElementById("teamB").innerHTML = teamB.map(p => `<li>${p.name} (${p.level})</li>`).join("");

    window.lastTeams = { teamA, teamB };
}

// Copiar times para WhatsApp
function copyToWhatsApp() {
    if (!window.lastTeams) {
        alert("Gere os times primeiro!");
        return;
    }

    const { teamA, teamB } = window.lastTeams;

    let text = "‚öΩ *Times da Pelada*\n\n";
    text += "üîµ *Time A:*\n";
    teamA.forEach(p => text += `‚Ä¢ ${p.name} (${p.level})\n`);

    text += "\nüî¥ *Time B:*\n";
    teamB.forEach(p => text += `‚Ä¢ ${p.name} (${p.level})\n`);

    navigator.clipboard.writeText(text).then(() => {
        alert("Times copiados! Agora cole no WhatsApp.");
    });
}

</script>

</body>
</html>
